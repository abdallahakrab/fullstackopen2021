(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(15),o=t.n(c),a=(t(20),t(6)),u=t(3),i=t(0);var s=function(e){var n=e.onAdd,t=e.newName,r=e.onNameChange,c=e.newNumber,o=e.onNumberChange;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsx)("label",{htmlFor:"name",children:"Name"}),Object(i.jsx)("input",{value:t,onChange:r,id:"name",type:"text"}),Object(i.jsx)("label",{htmlFor:"number",children:"Number"}),Object(i.jsx)("input",{value:c,onChange:o,id:"number"}),Object(i.jsx)("button",{type:"submit",children:"Add"})]})})};var l=function(e){var n=e.contact,t=e.onClickDelete;return Object(i.jsxs)("div",{children:["".concat(n.name,"  ").concat(n.number)," ",Object(i.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})};var d=function(e){var n=e.contacts,t=e.onDelete;return Object(i.jsx)("div",{children:n.map((function(e){return Object(i.jsxs)(l,{contact:e,onClickDelete:t,children:[e.name,e.number]},e.id)}))})};var b=function(e){var n=e.searchTerm,t=e.onSearch;return Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"search",children:"name"}),Object(i.jsx)("input",{id:"search",value:n,onChange:t,type:"text"})]})},j=t(4),h=t.n(j),m="/api/persons/",f={addPerson:function(e){return h.a.post(m,e).then((function(e){return e.data}))},removePerson:function(e){return h.a.delete("".concat(m).concat(e))},updateNumber:function(e){return h.a.put("".concat(m).concat(e.id),e).then((function(e){return e.data}))}};var v=function(e){var n=e.error,t=e.errorColor;return n?Object(i.jsx)("div",{className:"error".concat(t),children:n}):null};var O=function(){var e=Object(r.useState)(""),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),l=Object(u.a)(o,2),j=l[0],m=l[1],O=Object(r.useState)([]),x=Object(u.a)(O,2),p=x[0],g=x[1],w=Object(r.useState)(""),C=Object(u.a)(w,2),N=C[0],S=C[1],k=Object(r.useState)(""),y=Object(u.a)(k,2),T=y[0],D=y[1],P=Object(r.useState)("Green"),A=Object(u.a)(P,2),F=A[0],G=A[1];Object(r.useEffect)((function(){h.a.get("/api/persons").then((function(e){g(e.data)}))}),[]);var L=p.filter((function(e){return e.name.toLowerCase().includes(N.toLocaleLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"PhoneBook"}),Object(i.jsx)(v,{error:T,errorColor:F}),Object(i.jsx)("h1",{children:"Search"}),Object(i.jsx)(b,{searchTerm:N,onSearch:function(e){var n=e.target.value;S(n)}}),Object(i.jsx)("h1",{children:"Add new Contact"}),Object(i.jsx)(s,{onAdd:function(e){e.preventDefault();var n=p.find((function(e){return e.name===t}));if(n){if(window.confirm("".concat(t," already exists do you want to replace the old number with the new one?"))){var r=Object(a.a)(Object(a.a)({},n),{},{number:j});f.updateNumber(r).then((function(e){console.log(e);var n=p.map((function(n){return console.log(n),console.log(e),n.id===e.id?e:n}));D("Number updated"),setTimeout((function(){return D("")}),5e3),console.log(n),g(n),c(""),m("")})).catch((function(){D("".concat(t," is not found")),G("Red"),setTimeout((function(){D(""),G("Green")}),5e3);var e=p.filter((function(e){return e.name!==t}));g(e)}))}}else{var o={name:t,number:j};f.addPerson(o).then((function(e){g(p.concat(e)),c(""),m(""),D("Contact added"),setTimeout((function(){return D("")}),5e3)})).catch((function(e){var n=e.response.data.error;D(n),G("Red"),setTimeout((function(){D(""),G("Green")}),5e3)}))}},onNameChange:function(e){var n=e.target.value;c(n)},onNumberChange:function(e){var n=e.target.value;m(n)},newName:t,newNumber:j}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{contacts:N?L:p,onDelete:function(e){var n=e.id,t=e.name;window.confirm(" do you really want to delete ".concat(t,"?"))&&(console.log("here"),f.removePerson(n).then((function(){console.log("newlist");var e=p.filter((function(e){return e.id!==n}));g(e)})).catch((function(e){console.log(e)})))}})]})};o.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.93e455d2.chunk.js.map